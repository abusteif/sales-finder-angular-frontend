<app-controls-ribbon>
  <div class="controls-layout">
    <div class="controls-left">
      <div class="control-buttons">
        <button
          class="control-button"
          [class.filter-active]="isFilterActive"
          (click)="filterClickHandler()"
        >
          <i class="fas fa-filter filter-icon"></i>
          <span class="button-text">Filter</span>
        </button>
        <button
          class="control-button"
          [class.sort-active]="isSortActive"
          (click)="sortClickHandler()"
        >
          <i class="fas fa-sort sort-icon"></i>
          <span class="button-text">Sort</span>
        </button>
        <button class="control-button" [class.select-active]="isItemSelectionMode" (click)="selectItemsClickHandler()">
          <i class="fas fa-check-square select-icon"></i>
          <span class="button-text">{{ selectedItemsCount > 0 ? 'Unselect' : 'Select' }}</span>
        </button>
        <button 
          *ngIf="selectedItemsCount >= 2"
          class="control-button compare-button-flash" 
          (click)="compareClickHandler()"
        >
          <i class="fas fa-columns compare-icon"></i>
          <span class="button-text">Compare</span>
        </button>
        <button class="control-button" (click)="refreshClickHandler()">
          <i class="fas fa-sync refresh-icon"></i>
          <span class="button-text">Refresh</span>
        </button>
        <button
          class="control-button mobile-display-button"
          (click)="displaySettingsClickHandler()"
        >
          <i class="fas fa-cog display-icon"></i>
          <span class="button-text">Display</span>
        </button>
      </div>
      <div class="mobile-second-row">
        <div class="search-container">
          <form (ngSubmit)="onSearchSubmit($event)" [class.has-search-value]="searchValue">
            <input
              #searchInput
              type="search"
              class="input"
              placeholder="Search"
              enterkeyhint="search"
              [value]="searchValue"
            />
            <i 
              *ngIf="searchValue" 
              class="fas fa-times clear-icon" 
              (click)="clearSearch()"
            ></i>
            <i class="fas fa-search search-icon" [class.search-icon-with-clear]="searchValue"></i>
          </form>
        </div>

        <div class="category-checkbox">
          <label class="checkbox-label">
            <input
              type="checkbox"
              (change)="handleFeaturedItemsOnlyChange($event)"
              [checked]="isFeaturedItemsOnly"
            />
            <span
              class="highest-discount-icon"
              matTooltip="Featured items only"
              matTooltipPosition="above"
              [matTooltipShowDelay]="500"
              >ðŸ”¥</span
            >
          </label>
        </div>
      </div>
    </div>

    <app-item-per-page
      class="hide-on-mobile"
      [itemsPerPage]="itemsPerPage"
      (itemsPerPageChange)="itemsPerPageChange($event)"
    ></app-item-per-page>
  </div>
</app-controls-ribbon>

<app-display-settings-modal
  [showModal]="showDisplayModal"
  [itemsPerPage]="itemsPerPage"
  [cardsPerRow]="cardsPerRow"
  (onCloseModal)="closeDisplayModal()"
  (itemsPerPageChange)="itemsPerPageChange($event)"
  (cardsPerRowChange)="cardsPerRowChange($event)"
  (onApply)="applyDisplaySettings()"
>
</app-display-settings-modal>
